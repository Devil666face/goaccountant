{{ define "user_list" }}
<div class="container pt-5">
  <div class="row">
    <div class="col">
      <button type="button" class="btn btn-outline-primary form-control mb-2" data-bs-toggle="modal"
        data-bs-target="#create_user" hx-get='{{ .c.URL "user_create" }}' hx-swap="innerHTML"
        hx-target="#create_user_content">
        Create user ğŸ™â€â™‚ï¸
      </button>
    </div>
    {{ template "user_content" . }}
  </div>
</div>
{{ with $id:="create_user" }}{{ template "modal_dialog" $id }}{{ end }}
{{ with $id:="edit_user" }}{{ template "modal_dialog" $id }}{{ end }}
{{ end }}

{{ block "user_content" . }}
<div id="users">
  {{ range .Users }}
  <div class="row mb-2" id="user_{{ .ID }}">
    <div class="col">{{ .ID }}</div>
    <div class="col">{{ .Username }}</div>
    <div class="col">{{ if .Admin }}âœ…{{ else }}âŒ{{ end }}</div>
    <div class="col">
      <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#edit_user"
        hx-get='{{ .c.URLto "user-edit" "id" .ID }}' hx-swap="innerHTML" hx-target="#edit_user_content">
        Edit ğŸ“
      </button>
    </div>
    <div class="col">
      <button type="button" class="btn btn-outline-danger" hx-confirm="ğŸ—‘ Delete user - {{ .Username }}?"
        hx-swap="innerHTML" hx-delete='{{ .c.URLto "user-delete" "id" .ID }}' hx-target="#users">
        Delete ğŸ—‘
      </button>
    </div>
  </div>
  {{ end }}
</div>
{{ end }}